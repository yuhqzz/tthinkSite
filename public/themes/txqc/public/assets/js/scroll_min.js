/*
 * Created by zhaozhao.
 * Date: 2017/11/6
 * version : 2.28 Beta
*/
jQuery.fn.extend({autoTopic_scroll:function(a){function u(a){d.find("embed, object").each(function(){if(0==$(this).siblings().length){var a=$(this).parent(),b=a.html();a.attr("scrollEmbed",b).html("")}}),f.eq(a).find("[scrollEmbed]").each(function(){$(this).html($(this).attr("scrollEmbed"))})}function v(a,e){return 1==k&&!b.line&&e==n||0==m||k>j||(1!=k||b.line?0==b.onClick(n,a):0==b.onClick(n,e))?!1:(m=!1,1!=k||b.line?b.onClick(n,a):(f.hide(),e=n==j-1&&1==a?0:0>n&&0==a?j-2:e,a=b.gap||0!=e?b.gap||-1!=e?a:1:0,0==a&&d.css(i,-g),f.eq(0==a?n:e).css(i,g).show(),f.eq(0==a?e:n).css(i,0).show(),b.onClick(n,e)),t.removeClass("cur").eq(null!=e?e:a>j-1?a%j:0>a?j+a%j:a).addClass("cur"),0>a?(d.css(i,(-n-j)*g)+"px",a+=j):a>j+l&&(d.css(i,(j-n)*g)+"px",a-=j),d.stop().delay(b.delay).animate(c?{left:-a*g+"px"}:{top:-a*g+"px"},b.speed,b.easing,function(){n=a,1!=k||b.line||(d.css(i,0),f.hide().eq(e).show().css(i,0),n=e),q&&(0==n?$(b.leftBtn).hide()&&$(b.rightBtn).show():$(b.leftBtn).show()&&$(b.rightBtn).hide()),u(n),b.callback(n),m=!0}),void 0)}function w(){1!=k||b.line?q?v(0):v(n-l):v(0,n-1)}function x(){1!=k||b.line?q?v(j-k):v(n+l):v(1,n+1)}function A(){4==b.side||1==b.side?x():w(),p=setTimeout(function(){o||A()},b.space)}var p,c,d,e,f,g,h,i,j,k,l,m,n,o,q,r,s,t,z,y,B,b={toc:"*",leftBtn:!1,rightBtn:!1,speed:1e3,easing:"swing",range:!1,autoPlay:!1,space:3e3,side:4,gap:!0,line:!1,delay:0,control:!1,controlToc:"*",onLoad:function(){},onReady:function(){},onClick:function(){},callback:function(){}};null!=a&&jQuery.extend(b,a),b.onLoad(),c=2==b.side||4==b.side,d=this,e=c?d.parent().width():d.parent().height(),f=d.children(b.toc),g=c?f.outerWidth(!0):f.outerHeight(!0),h=c?"width":"height",i=c?"left":"top",j=f.length,k=Math.round(e/g),l=b.range!==!0&&b.range>0?b.range:2>j/k&&0==b.range?1:2>j/k&&b.range===!0?j-k:k,m=!0,n=-(parseInt("auto"==d.css(i)?0:d.css(i))/g),o=0,q=2>j/k&&l>j-k,r=$(window).width()>990?$(window).width():990,s=$(b.control),t=s.children(b.controlToc),d.parent().width()==$(window).width()&&(g=c?r:g,f.width(r)),d.css(h,(q?j*g:1!=k||b.line?2*j*g:2*g)+"px").css("position","absolute"),d.parent().width()==$(window).width()&&(d.parent().width(r),$(window).resize(function(){r=$(window).width()>990?$(window).width():990,g=c?r:g,d.parent().width(r),d.width(2*r),f.width(r)})),(b.line&&1==k||k>1&&!q)&&(f.clone().appendTo(d),f=d.children(b.toc)),1==k&&(b.line||f.css({position:"absolute",display:"none"}).first().show(),t.each(function(a){$(this).click(function(){b.line?v(j>n?a:j+a):a>n?v(1,a):v(0,a)})}),u(n)),b.onReady(),q&&$(b.leftBtn).hide(),$(b.leftBtn).click(function(){w()}),$(b.rightBtn).click(function(){x()}),1==b.autoPlay&&(y=new Date,setTimeout(function(){o||A()},b.space),B=d.selector,$(B+","+b.leftBtn+","+b.rightBtn+(b.control?","+b.control:"")).mouseenter(function(){o=1,clearTimeout(p)}).mouseleave(function(){o=0,p=setTimeout(function(){o||A()},b.space)}))}});